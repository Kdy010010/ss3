<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>StarShield3: 철과 십자가 — Prologue</title>
<style>
  :root{
    --bg:#050014;
    --text:#f4f8ff;
    --sub:#a6b0ff;
    --accent:#4af2c5;
    --danger:#ff4b81;
    --gold:#ffd166;
    --panelA: rgba(8,12,34,.92);
    --panelB: rgba(6,8,24,.92);
  }
  *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}
  html,body{height:100%}
  body{
    background: radial-gradient(circle at 18% 12%, #1b1f58 0%, #07001b 45%, #03000c 100%);
    color:var(--text);
    overflow:hidden;
  }

  /* Mobile: allow scrolling (short screens / safe areas) */
  @media (max-width: 860px), (max-height: 740px){
    body{overflow:auto;-webkit-overflow-scrolling:touch;}
    .wrap{align-items:flex-start; padding:14px 12px 28px; height:auto; min-height:100%;}
    .card{margin-top:12px; margin-bottom:24px;}
  }

  /* Background layers */
  #stars{position:fixed;inset:0;width:100%;height:100%;display:block;z-index:0;}
  .vignette{position:fixed;inset:-20%;z-index:1;pointer-events:none;
    background:
      radial-gradient(circle at 50% 30%, rgba(0,0,0,0) 0 35%, rgba(0,0,0,.55) 60%, rgba(0,0,0,.92) 100%),
      radial-gradient(circle at 80% 10%, rgba(74,242,197,.12) 0, rgba(0,0,0,0) 55%);
  }
  .scan{position:fixed;inset:0;z-index:2;pointer-events:none;opacity:.08;
    background: repeating-linear-gradient(to bottom, rgba(255,255,255,.15) 0 1px, rgba(0,0,0,0) 1px 3px);
    mix-blend-mode: overlay;
    animation: scanMove 8s linear infinite;
  }
  @keyframes scanMove{from{transform:translateY(-30px)}to{transform:translateY(30px)}}

  /* Frame */
  .wrap{position:relative;z-index:3;height:100%;display:flex;align-items:center;justify-content:center;padding:18px;}
  .card{
    width:min(980px, 100%);
    background: linear-gradient(180deg, var(--panelA), var(--panelB));
    border:1px solid rgba(166,176,255,.18);
    border-radius:22px;
    box-shadow: 0 18px 60px rgba(0,0,0,.55);
    overflow:hidden;
    transform: translateY(10px);
    opacity:0;
    animation: cardIn 900ms cubic-bezier(.2,.9,.2,1) forwards;
  }
  @keyframes cardIn{to{transform:translateY(0);opacity:1;}}

  .topbar{
    display:flex;align-items:center;justify-content:space-between;
    padding:14px 18px;
    background: rgba(10,14,40,.55);
    border-bottom:1px solid rgba(166,176,255,.12);
  }
  .badge{
    font-size:12px;letter-spacing:.18em;text-transform:uppercase;
    color: rgba(244,248,255,.78);
    display:flex;gap:10px;align-items:center;
  }
  .dot{width:8px;height:8px;border-radius:99px;background:var(--accent);box-shadow:0 0 14px rgba(74,242,197,.75)}
  .stamp{font-size:12px;color:rgba(166,176,255,.85)}

  .content{padding:18px;display:grid;grid-template-columns: 1.1fr .9fr;gap:18px;}
  @media (max-width:860px){.content{grid-template-columns:1fr;}}

  .title{
    font-size:32px;line-height:1.12;letter-spacing:.02em;
  }
  .subtitle{margin-top:6px;color:rgba(166,176,255,.92);font-size:14px;letter-spacing:.08em;text-transform:uppercase}

  .panel{
    margin-top:14px;
    border:1px solid rgba(166,176,255,.16);
    border-radius:18px;
    background: rgba(5,0,20,.22);
    padding:14px 14px;
  }
  .panel h3{
    font-size:12px;letter-spacing:.18em;text-transform:uppercase;
    color:rgba(244,248,255,.78);
    margin-bottom:10px;
  }

  .typebox{
    font-size:15px;line-height:1.75;
    color:rgba(244,248,255,.92);
    min-height: 172px;
    white-space: pre-wrap;
  }
  .cursor{display:inline-block;width:10px;animation: blink 1s steps(2,end) infinite;color:var(--accent)}
  @keyframes blink{50%{opacity:0}}

  .meta{
    display:flex;flex-wrap:wrap;gap:10px;
    margin-top:12px;
  }
  .chip{
    font-size:12px;
    color:rgba(244,248,255,.86);
    padding:8px 10px;
    border-radius:999px;
    background: rgba(166,176,255,.08);
    border:1px solid rgba(166,176,255,.14);
  }
  .chip b{color:var(--gold);font-weight:700}

  /* image side */
  .visual{
    position:relative;
    border-radius:18px;
    overflow:hidden;
    border:1px solid rgba(166,176,255,.16);
    background: rgba(0,0,0,.2);
    min-height: 310px;
  }
  .visual img{
    position:absolute;inset:0;
    width:100%;height:100%;object-fit:cover;
    filter: saturate(0.95) contrast(1.05) brightness(.92);
    transform: scale(1.03);
  }
  .visual::after{
    content:"";
    position:absolute;inset:0;
    background:
      radial-gradient(circle at 20% 20%, rgba(74,242,197,.18), rgba(0,0,0,0) 55%),
      linear-gradient(to top, rgba(0,0,0,.78), rgba(0,0,0,.05) 55%);
  }
  .caption{
    position:absolute;left:14px;right:14px;bottom:12px;
    color:rgba(244,248,255,.9);
    font-size:13px;line-height:1.5;
    text-shadow: 0 10px 30px rgba(0,0,0,.6);
  }
  .caption .tag{display:inline-flex;align-items:center;gap:8px;margin-bottom:6px;color:rgba(244,248,255,.78);font-size:12px;letter-spacing:.16em;text-transform:uppercase}
  .caption .tag .warn{width:8px;height:8px;border-radius:99px;background:var(--danger);box-shadow:0 0 14px rgba(255,75,129,.75)}

  /* bottom actions */
  .actions{
    display:flex;align-items:center;justify-content:space-between;
    padding:14px 18px;
    border-top:1px solid rgba(166,176,255,.12);
    background: rgba(10,14,40,.35);
  }
  .hint{color:rgba(166,176,255,.9);font-size:13px}
  .btns{display:flex;gap:10px;flex-wrap:wrap}
  button,a.btn{
    appearance:none;border:none;cursor:pointer;
    padding:10px 14px;border-radius:14px;
    font-weight:650;
    letter-spacing:.02em;
    color:rgba(5,0,20,.95);
    background: linear-gradient(180deg, rgba(74,242,197,1), rgba(74,242,197,.78));
    box-shadow: 0 10px 26px rgba(74,242,197,.18);
    text-decoration:none;
    display:inline-flex;align-items:center;gap:10px;
  }
  a.btn.secondary{
    background: rgba(166,176,255,.12);
    color: rgba(244,248,255,.9);
    border:1px solid rgba(166,176,255,.18);
    box-shadow:none;
  }

  /* fade to black */
  .fadeout{
    position:fixed;inset:0;background:#000;z-index:999;
    opacity:0;pointer-events:none;transition: opacity 650ms ease;
  }
  .fadeout.on{opacity:1;pointer-events:auto;}
</style>
</head>
<body>
<canvas id="stars"></canvas>
<div class="vignette"></div>
<div class="scan"></div>
<div class="fadeout" id="fade"></div>

<div class="wrap">
  <div class="card" role="dialog" aria-label="Prologue">
    <div class="topbar">
      <div class="badge"><span class="dot"></span> PROLOGUE · CLASSIFIED BRIEF</div>
      <div class="stamp">UNITED STATES CONGRESS — 2058-07-21</div>
    </div>

    <div class="content">
      <div>
        <div class="title">미국 의회는 <span style="color:var(--danger);font-weight:800">나치의 존재</span>를 확인했다</div>
        <div class="subtitle">Moonfront War · Near Side Only</div>

        <div class="panel">
          <h3>Situation Report</h3>
          <div class="typebox" id="type"></div><span class="cursor">▍</span>
          <div class="meta">
            <div class="chip"><b>전장</b> 달 앞면(near side)</div>
            <div class="chip"><b>핵심 지역</b> Procellarum · Imbrium · Tranquillitatis · Tycho</div>
            <div class="chip"><b>제약</b> 달 뒷면은 점령 불가</div>
          </div>
        </div>
      </div>

      <div class="visual" aria-label="scene">
        <img src="Gemini_Generated_Image_vpquz9vpquz9vpqu.png" alt="Moonfront" />
        <div class="caption">
          <div class="tag"><span class="warn"></span> ALERT LEVEL · RED</div>
          <div>
            <b>Front Side Line:</b> 전파가 닿는 곳, 보급이 가능한 곳, 그리고… 전쟁이 ‘보이는’ 곳.<br/>
            <span style="color:rgba(166,176,255,.92)">Back Side:</span> South Pole–Aitken 분지와 Tsiolkovskiy 일대는 저항이 심하고 음영지대가 길어, 의회는 “즉시 해방 불가”로 분류했다.
          </div>
        </div>
      </div>
    </div>

    <div class="actions">
      <div class="hint">ENTER를 눌러 전장을 시작할 수 있습니다.</div>
      <div class="btns">
        <a class="btn secondary" href="ep.html" onclick="return navWithFade(event, this.href)">에필로그 미리보기</a>
        <a class="btn" href="ss.html" onclick="return navWithFade(event, this.href)">전투 시작</a>
      </div>
    </div>
  </div>
</div>

<script>
  // Starfield (same vibe as ep)
  const c = document.getElementById('stars');
  const ctx = c.getContext('2d');
  let W=0,H=0,DPR=1;
  const stars=[];

  function resize(){
    DPR = Math.max(1, window.devicePixelRatio || 1);
    W = window.innerWidth; H = window.innerHeight;
    c.width = Math.floor(W*DPR); c.height = Math.floor(H*DPR);
    c.style.width = W+'px'; c.style.height = H+'px';
    ctx.setTransform(DPR,0,0,DPR,0,0);
    stars.length = 0;
    const n = Math.floor(Math.min(420, (W*H)/4200));
    for(let i=0;i<n;i++){
      stars.push({
        x: Math.random()*W,
        y: Math.random()*H,
        r: Math.random()*1.5 + 0.2,
        v: Math.random()*0.18 + 0.03,
        a: Math.random()*0.75 + 0.15
      });
    }
  }
  window.addEventListener('resize', resize, {passive:true});
  resize();

  function tick(){
    ctx.clearRect(0,0,W,H);
    ctx.globalAlpha = 1;
    for(const s of stars){
      s.y += s.v;
      if(s.y > H + 5) { s.y = -5; s.x = Math.random()*W; }
      ctx.globalAlpha = s.a;
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
      ctx.fillStyle = '#ffffff';
      ctx.fill();
    }
    ctx.globalAlpha = 1;
    requestAnimationFrame(tick);
  }
  tick();

  // Typewriter prologue
  const lines = [
    "[기밀] 워싱턴 D.C. — 의회 비상 청문회",
    "",
    "한때 신화로 취급되던 ‘달 제4제국’의 존재가 확인되었다.",
    "저들은 미국의 달기지인 아르테미스 6 우주 정거장을 파괴하고 선량한 시민들을 학살했다.",
    "또한 나치 잔당은 Oceanus Procellarum(폭풍의 대양) 주변에 궤도-지상 연계 기지를 구축했고,",
    "Copernicus와 Aristarchus 고지대를 감시 거점으로 삼았다.",
    "",
    "의회는 즉각 작전을 승인한다: 달 ‘앞면’의 탈환.",
    "Mare Imbrium(비의 바다), Mare Tranquillitatis(고요의 바다), Tycho 분화구까지—",
    "보급선과 통신이 닿는 곳을 단계적으로 해방한다.",
    "",
    "단, 달 ‘뒷면’은 다르다.",
    "South Pole–Aitken 분지의 지형은 깊고, 음영지대는 길며, 저항은 조직적이다.",
    "의회 결의문: “뒷면은 당장 점령할 수 없다. 그러나… 전쟁은 여기서 시작된다.”"
  ];

  const el = document.getElementById('type');
  let t = lines.join('\n');
  let i = 0;
  function type(){
    const speed = (t[i] === '\n') ? 18 : 22;
    el.textContent = t.slice(0, i+1);
    i++;
    if(i < t.length) setTimeout(type, speed);
  }
  setTimeout(type, 350);

  // Fade navigation
  const fade = document.getElementById('fade');
  function navWithFade(ev, href){
    if(ev) ev.preventDefault();
    fade.classList.add('on');
    setTimeout(()=>{ location.href = href; }, 680);
    return false;
  }
  window.navWithFade = navWithFade;

  // Enter to start
  window.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){
      const a = document.querySelector('a.btn[href="ss.html"]');
      if(a) navWithFade(e, a.href);
    }
  });
</script>
</body>
</html>
